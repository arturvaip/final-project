<!DOCTYPE html>
<html lang="ru">
    <head>
     <script async src="https://www.googletagmanager.com/gtag/js?id=G-ВАШ_ID"></script>
     <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());
         gtag('config', 'G-HD04WF6XB5');
     </script>
     <style>

        body, html {
         overflow: hidden;
         width: 100%;
         height: 100%;
        }
      
        body {
          background-image: url("https://thumb.ac-illust.com/78/7883eb7a5bf8b738b8bac434e63e6259_t.jpeg");
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          margin: 0;
          background-size: 100% auto;
          background-position: center;
          background-repeat: repeat-x;
          text-align: center;
          animation: moveBackground 20s linear infinite;
        }

        @keyframes moveBackground {
          from {
            background-position: 0 0;
          }
          to {
            background-position: 1000px 0;
          }
        }

        .lang {
         position: fixed;
         bottom: 2vh;
         left: 2vw;
         z-index: 10000;
        } 
        
        #lang {
         font-weight: bold; 
         cursor: pointer;  
         width: 6vw;
         height: 4vh;
         font-size: 1vw;
         background-color: #0084fff1;
         border-radius: 999px;
         border: none;
        }

        #lang:hover {
         background-color: #003e79f1;
        }

        [dir="rtl"] .frame {
         text-align: right;
         padding: 0 5vw;
        }

        [dir="rtl"] .text, 
        [dir="rtl"] .choice {
         width: 90%;
         margin-left: auto;
         margin-right: auto;
         word-wrap: break-word;
        }

        [dir="rtl"] .okno {
         right: 50%;
         left: auto;
         transform: translateX(50%);
        }

        #startButton {
         padding: 10px 20px; 
         font-weight: bold; 
         cursor: pointer;  
         width: 25vw;
         height: 12vh;
         font-size: 2vw;
         background-color: #e0e270f1;
         border-radius: 999px;
         border: none;
        }

        .tex {
         display: flex;
         color: rgb(245, 245, 85);
         text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
         font-size: 3vw;
         margin-bottom: 8vh;
         flex-direction: column;
         justify-content: flex-start;
         height: 15vh;
        }

        .tex-2 {
         color: rgb(245, 245, 245);
         font-size: 2vw;
         margin-bottom: 8vh;
        }

        #startButton:hover {
         background-color: #e0e27083;  
        }     
        
        #boy {
         background: rgb(0, 111, 214);
         width: 25vw;
         height: 12vh;    
         border-radius: 999px;   
         font-size: 2vw;     
         color: white; 
        }

        #girl { 
         background: rgb(255, 107, 107);
         color: rgb(255, 255, 255);
         width: 25vw;
         height: 12vh;  
         border-radius: 999px; 
         font-size: 2vw;          
        }

        h2 {
         font-size: 2vw;
         color: white;
        }

        #boy:hover {
         background-color: rgba(0, 111, 214, 0.548);  
        }    

        #girl:hover {
         background-color: rgba(255, 107, 107, 0.623); 
        }    

        .text {
         color: white;
         text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
         font-size: 3vw;
         margin-bottom: 8vh;

        }

        .choice {
         color: white;
         text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
         font-size: 1.5vw;

        }

        .frame {
         display: flex;
         position: relative;
         flex-direction: column;
         justify-content: space-between;
         min-height: 100vh;
        }

        .knopka {

         background: rgb(245, 245, 85);
         width: 20vw;
         height: 30vh;  
         bottom: 5vh;
         margin: 2vw;
         border-radius: 20%; 
         font-size: 1.4vw;  
        }

        .knopka:hover {
         background: rgb(182, 182, 60);;
         cursor: pointer;
        }

        .okno {
          position: absolute;
          bottom: 2vh;
          left: 50%;
          transform: translateX(-50%);
          display: flex;
        }

        #frame-1 { 
            background-image: url(https://foni.papik.pro/uploads/posts/2024-10/foni-papik-pro-aj05-p-kartinki-nochnoe-nebo-na-prozrachnom-fone-12.png); 
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }
        #frame-2 { 
            background-image: url(https://cdn.pixabay.com/photo/2024/09/09/11/09/fall-9034528_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }
        #frame-3 { 
            background-image: url(https://cdn.pixabay.com/photo/2024/09/09/11/09/fall-9034528_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }
        #frame-4 { 
            width: 100vw;
            height: 100vh;
            background-image: url(https://cdn.pixabay.com/photo/2024/03/02/12/02/ai-generated-8608464_1280.jpg); 
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }
        #frame-5 { 
            background-image: url(https://cdn.pixabay.com/photo/2023/02/01/08/01/fairytale-forest-7759927_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }
        #frame-6 { 
            background-image: url(https://cdn.pixabay.com/photo/2021/08/18/07/45/castle-6554907_960_720.jpg);
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }
        #frame-7 { 
            background-image: url('assets/images/castle_gate.png.png'); 
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-8-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2024/01/24/09/02/ai-generated-8529089_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-9-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2023/06/14/18/22/ai-generated-8063802_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-10-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2024/01/13/19/14/ai-generated-8506431_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-11-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2024/05/07/06/13/ai-generated-8744900_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-12-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2024/05/07/06/13/ai-generated-8744900_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-13-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-repeat: repeat;
            background-position: center;
            margin: 0;
        }

        #frame-14-strength { 
            background-color: #000000;
            background-image: url(https://cdn.pixabay.com/photo/2024/06/21/04/17/ai-generated-8843438_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-15-strength { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-8-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/03/05/05/24/ai-generated-8613746_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-9-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/05/12/18/34/ai-generated-8757463_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-10-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/07/03/14/52/tunnel-8870193_1280.jpg); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-11-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-12-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-13-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-14-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-15-agility { 
            background-image: url(https://cdn.pixabay.com/photo/2024/08/22/22/03/bed-8990246_960_720.png); 
            width: 100vw;
            height: 100vh;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0;
        }

        #frame-win {
            background-image: url(https://cdn.pixabay.com/photo/2024/09/02/11/03/ai-generated-9016484_1280.jpg);
            background-size: cover; 
            background-position: center;  
            background-repeat: no-repeat; 
            height: 100vh;
            width: 100vw;  
        }

        #frame-win-2 {
            background-image: url(https://cdn.pixabay.com/photo/2024/04/03/08/04/tree-8672380_1280.jpg);
            background-size: cover; 
            background-position: center;  
            background-repeat: no-repeat; 
            height: 100vh;
            width: 100vw;  
        }

        #frame-gameover-1 {
            background-image: url(https://cdn.pixabay.com/photo/2018/05/17/11/20/end-3408301_1280.jpg);
            background-size: cover; 
            background-position: center;  
            background-repeat: no-repeat; 
            height: 100vh;
            width: 100vw;  
        }

        #frame-gameover-2 {
            background-image: url(https://images.unsplash.com/photo-1563824460668-8d28331a877f?q=80&w=1937&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);
            background-size: cover; 
            background-position: center;  
            background-repeat: no-repeat; 
            height: 100vh;
            width: 100vw;  
        }      
        
        #frame-gameover-3 {
            background-image: url(https://cdn.pixabay.com/photo/2016/03/25/13/21/blue-1278829_1280.jpg);
            background-size: cover; 
            background-position: center;  
            background-repeat: no-repeat; 
            height: 100vh;
            width: 100vw;  
        } 

        #preloader {
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: #1e1e1e;
         display: flex;
         justify-content: center;
         align-items: center;
         z-index: 9999;
        }

       .loader {
         border: 8px solid #f3f3f3;
         border-top: 8px solid #3498db;
         border-radius: 50%;
         width: 80px;
         height: 80px;
         animation: spin 1s linear infinite;
        }

       @keyframes spin {
         0% { transform: rotate(0deg); }
         100% { transform: rotate(360deg); }
        }

        .lang-knopka {
         font-weight: bold; 
         cursor: pointer;  
         width: 4vw;
         height: 3vh;
         font-size: 0.7vw;
         background-color: #2997fff1;
         border-radius: 999px;
         border: none;
         margin-bottom: 0.6vw;
         margin-top: 0.6vh;
        }

        .lang-knopka:hover {
         background-color: #195e9ef1;
        }
        
        .cont {
         background: rgb(100, 200, 100);
         width: 20vw;
         height: 10vh;
         bottom: 5vh;
         margin: 2vw;
         border-radius: 20px;
         font-size: 1.4vw;
         color: white;
        }

        .cont:hover {
            background-color: rgb(57, 119, 57);;
        }

        #titri {
         background-image: url(https://cdn.pixabay.com/photo/2020/12/23/14/41/forest-5855196_1280.jpg);
         width: 100vw;
         height: 100vh;
         background-size: 100% 100%;
         background-repeat: no-repeat;
         background-position: center;
         margin: 0;
         display: flex;
         position: relative;
         flex-direction: column;
         justify-content: space-between;
         min-height: 100vh;
         font-size: 1vw;   
        }

        .titri {
         color: aliceblue;
         text-shadow: 3px 3px 5px rgba(0, 0, 0, 2);
        }

        .spacer {
         height: 30%;
        }
     </style>
    </head>
    <body>

     <div id="preloader">
         <div class="loader"></div>
     </div>

     <div class="lang">
         <button id="rus" style="display: none;" class="lang-knopka"> Русский </button>
         <button id="he" style="display: none;" class="lang-knopka"> עברית </button>
         <button id="lang" data-lang-key="r38">язык</button>
     </div>

     <div id="tex"  lang="he" dir="rtl"> 
        <div>
            <div  class="tex">
             <h7>Trail of Choices</h7>
            </div>
            <div class="tex-2">
             <h8 data-lang-key="r1">Обычный день внезапно прерывается вспышкой света.</h8>
            </div>
            <div class="tex-2">
             <h8 data-lang-key="r2">Что это - конец или начало? Сделай свой выбор… и узнай правду.</h8>
            </div>
         <button id="startButton" data-lang-key="r3">Начать</button>
        </div>
     </div>
        <div id="gender-screen" style="display: none;">
         <h2 data-lang-key="r4">твой пол?</h2>
         <button id="boy" data-lang-key="r5"> парень</button>
         <button id="girl" data-lang-key="r6">девушка</button>
        </div>

        <div id="frame-1" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 class="text" data-lang-key="r7">Идя домой, вы замечаете яркую вспышку. Вдруг небо наполняется ярким, ослепительным светом. Глядя на это, вам кажется, будто небо сломалось — в нём появилась трещина. Внезапно вы чувствуете, как это нечто начинает вас затягивать.</h3>
         <h4 class="choice" data-lang-key="r8">Ваше действие?</h4>

         <div class="okno" >
             <button class="knopka" onclick="makeChoice('strength')" data-lang-key="r9">Пытаться брыкаться и убежать.</button>
             <button class="knopka" onclick="makeChoice('intelligence')" data-lang-key="r10">Попытаться придумать план по безопасному приземлению.</button>
         </div>
        </div>

        <div id="frame-2" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 class="text" data-lang-key="r11">Очнувшись, ты чувствуешь лёгкую головную боль. Вдруг замечаешь лес — но не обычный: яркий, неестественного бирюзового цвета. Неуверенно идёшь прямо и видишь развилку. Правая тропа заросла и почти пропала, а левая — будто только что сделанная, чистая и ухоженная.</h3>
         <h4 class="choice" data-lang-key="r12">Какой же путь ты выберешь?</h4>

         <div class="okno">
             <button class="knopka" onclick="makeChoice('agility')" data-lang-key="r13">правая тропа</button>
             <button class="knopka" onclick="makeChoice('strength')" data-lang-key="r14">левая тропа</button>
         </div>
        </div>

        <div id="frame-3" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 class="text" data-lang-key="r15">Идя по выбранному пути, ты чувствуешь тревожность — будто кто-то наблюдает за тобой. Ты слышишь странный шум, похожий на шёпот...</h3>
         <h4 class="choice" data-lang-key="r16">что же вам делать?</h4>

         <div class="okno">
             <button class="knopka" onclick="makeChoice('intelligence')" data-lang-key="r17">попытаться прислушатся</button>
             <button class="knopka" onclick="makeChoice('agility')" data-lang-key="r18">закрыть уши, и ускорить щаг</button>
         </div>
        </div>

        <div id="frame-4" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 class="text" data-lang-key="r19">Чуть задумавшись, ты едва не падаешь в обрыв — дальше идти некуда...</h3>
         <h4 class="choice" data-lang-key="r20">ваше действие?</h4>

         <div class="okno">
             <button data-lang-key="r21" class="knopka" onclick="document.getElementById('frame-4').style.display='none'; document.getElementById('frame-gameover-2').style.display='block';">прыгнуть в обрыв</button>
             <button data-lang-key="r22" class="knopka" onclick="makeChoice('intelligence')">посторатся акуратно спустится</button>
         </div>
        </div>

        <div id="frame-5" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r23" class="text">После спуска ты продолжил идти и постепенно осознал, что что-то не так. Всё вокруг казалось неживым, а в голове мелькнула мысль: "Неужели я попал в иллюзию?"</h3>
         <h4 data-lang-key="r24" class="choice">как же тебе решить эту проблему?</h4>

         <div class="okno">
             <button data-lang-key="r25" class="knopka" onclick="makeChoice('strength')">посторатся сосредоточится и вернутся в реальность</button>
             <button data-lang-key="r26" class="knopka" onclick="makeChoice('vitality')">доверится ощущением и пройти дальше</button>
         </div>
        </div>

        <div id="frame-6" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r27" class="text">Пройдя чуть дальше вы в далике видите замок, большой, красивый, но вы замечаете стража — примерно три метра в высоту великана с мечом...</h3>
         <h4 data-lang-key="r28" class="choice">твои действие?</h4>

         <div class="okno">
             <button data-lang-key="r29"  class="knopka" onclick="makeChoice('agility')">проскочить мимо него</button>
             <button data-lang-key="r30" class="knopka" onclick="makeChoice('intelligence')">подождать пока он не потеряет бдительность и обойти его</button>
         </div>
        </div>

        <div id="frame-7" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r31" class="text">Дойдя до замка, ты замечаешь трое врат. На правых — символ кулака, на средних — кроличья лапка, на левых — символ книги...</h3>
         <h4 data-lang-key="r32" class="choice">куда тебе пойти?</h4>

         <div class="okno">
             <button data-lang-key="r33" class="knopka" onclick="makeChoice('strength'); checkDoor('strength');">в левый, веть, я сильный</button>
             <button data-lang-key="r34" class="knopka" onclick="makeChoice('agility'); checkDoor('agility');">в средний, ловкость, моё всё</button>
             <button data-lang-key="r35" class="knopka" onclick="makeChoice('intelligence'); checkDoor('intelligence');">в правый, магия мне по душе</button>
         </div>
        </div>
        <!--выбрана сила-->
         <div id="frame-8-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r42" class="text">Дверь силы приняла тебя, поздравляю. Вдруг ты замечаешь, что ты не внутри замка, а на поляне, и вдалеке виднеется деревенька.</h3>
         <h4 data-lang-key="r43" class="choice">Стоит ли туда идти?</h4>

         <div class="okno">
             <button data-lang-key="r44" class="knopka" onclick="nextFrame(); nextFrame()">Пойти в сторону деревни</button>
             <button data-lang-key="r45" class="knopka" onclick="increaseStat('strength'); nextFrame()">Обойти деревню</button>
         </div>
        </div>

        <div id="frame-9-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r46" class="text">Пытаясь обойти деревню, ты упал в яму. Вроде бы, кроме пары царапин, ничего серьёзного. Но ты замечаешь что-то вроде сундука. Открыв его, ты видишь меч с каким-то знаком на рукояти — такой был виден на флаге в той деревне.</h3>
         <h4 data-lang-key="r47" class="choice">Выбравшись, ты решаешь всё-таки пойти в ту самую деревню.</h4>

         <div class="okno">
             <button data-lang-key="r41" class="knopka" onclick="player.foundSword = true; localStorage.setItem('player', JSON.stringify(player)); nextFrame();">продолжить</button>
         </div>
        </div>

        <div id="frame-10-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r48" class="text">дойдя до деревни, ты замечаешь людей, самых обычних, начав распрашивать людей о этом мире, символе на мече, и обо всём остольном тебе удаётся узнать немного.</h3>
         <h4 data-lang-key="r49" class="choice">люди сказали что лучше обратится к мудрецу за той частью сумеречного леса</h4>

         <div class="okno">
         <button class="knopka" onclick="player.visitedVillage2 = true; localStorage.setItem('player', JSON.stringify(player)); nextFrame()" data-lang-key="r41">продолжить</button>
         </div>
        </div>

        <div id="frame-11-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r50" class="text">идя по лесу, в далике ты видишь дом, в нём же, через окно ты видишь человека, сидящим за столом.</h3>
         <h4 data-lang-key="r51" class="choice">как же вам поступить?</h4>

         <div class="okno">
         <button class="knopka" onclick="nextFrame()" data-lang-key="r52">выбить дверь ногой</button>
         <button class="knopka" onclick="showSageFrame()" data-lang-key="r53">спокойно постучать</button>
         </div>
        </div>

        <div id="frame-12-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r54" class="text">Ты с разбега выбил дверь. Мудрец резко вскочил с места, его лицо исказилось от гнева. "Ты ещё не готов познать силу, если идёшь по пути разрушения," — сказал он, и дом исчез в яркой вспышке света.</h3>
         <h4 data-lang-key="r55" class="choice">не думаю что у тебя есть выбор что делать...</h4>

         <div class="okno">
         <button class="knopka" onclick="document.getElementById('frame-12-strength').style.display='none'; document.getElementById('frame-gameover-3').style.display='block';" data-lang-key="r60">конец?</button>
         </div>
        </div>

        <div id="frame-13-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r56" class="text" id="mech">Ты спокойно постучал в дверь. Через несколько секунд она приоткрылась, и из дома вышел седой мудрец. Он внимательно осмотрел тебя и сказал: "Ты несёшь на себе знак древней силы. Заходи, расскажу тебе больше.</h3>
         <h4 data-lang-key="r57" class="choice">что же ты будешь делать?</h4>

         <div class="okno">
         <button class="knopka" onclick="player.metSage = true; localStorage.setItem('player', JSON.stringify(player)); nextFrame(); nextFrame();" data-lang-key="r58">Зайти внутрь.</button>
         <button class="knopka" onclick="nextFrame(); increaseStat('agility');" data-lang-key="r59">Сказать, что сначала осмотришься вокруг.</button>
         </div>
        </div>

        <div id="frame-14-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r93" class="text">вокруг нет нечего особенного, кроме кулона который валялся под кустами</h3>
         <h4 data-lang-key="r94" class="choice">не чуствуя особого доверия к мудрецу, вы решаете сохранить в тайне находку</h4>

         <div class="okno">
         <button class="knopka" onclick="player.metSage = true; player.kulon = true; localStorage.setItem('player', JSON.stringify(player)); nextFrame()" data-lang-key="r41">продолжить</button>
         </div>
        </div>

        <div id="frame-15-strength" class="frame strength-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r95" class="text">зайдя в дом, он оказывается намного больше внутри чем снаружи, мебель тут не самая новая, будто из древности, но при этом как новое, дом выглядил очень уютным на удивление</h3>
         <h4 data-lang-key="r96" class="choice">посмотрев на мудреца, увидел что он сидит за столом и жестом приглашил сесть к нему</h4>

         <div class="okno">
         <button class="knopka" onclick="document.getElementById('frame-win-2').style.display='block'; document.getElementById('frame-15-strength').style.display='none';" data-lang-key="r41">продолжить</button>
         </div>
        </div>
        <!--конец силы-->
        <!--начало ловкости-->
        <div id="frame-8-agility" class="frame agility-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r66" class="text">Дверь ловкости приняла тебя, поздравляю. Вдруг ты замечаешь, что ты не внутри замка, а на поляне, ты решаешь побродить</h3>
         <h4 data-lang-key="r67" class="choice">вдалике веднее стена, хотя нет, скорее на ворота, и там проходят люди, видимо вход в столицу</h4>

         <div class="okno">
             <button data-lang-key="r68" class="knopka" onclick="nextFrame()">попробувать пойти на прямую</button>
             <button data-lang-key="r69" class="knopka" onclick="increaseStat('strength'); nextFrame(); nextFrame()">найти обходной вход</button>
         </div>
        </div>

        <div id="frame-9-agility" class="frame agility-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r70" class="text">подойдя ближе ты видишь людей, подойдя к ним они тебя не пропускают без документов, видимо придётся вернётся обратно</h3>
         <h4 data-lang-key="r71" class="choice">вдалике веднее стена, хотя нет, скорее на ворота, и там проходят люди, видимо вход в столицу</h4>

         <div class="okno">
             <button data-lang-key="r72" class="knopka" onclick="document.getElementById('frame-9-agility').style.display='none'; document.getElementById('frame-gameover-4').style.display='block';">попробувать пойти на прямую</button>
             <button data-lang-key="r73" class="knopka" onclick="nextFrame()">найти обходной вход</button>
         </div>
        </div>

        <div id="frame-10-agility" class="frame agility-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r75" class="text">пройдя в доль стены ты видишь люк? вроде бы ты не уверен, но и выбора то особо нет, пройдя по люку дальше ты выходишь около большого здание с табличкой ввиде большого плюса, "видимо это больница" зайдя в неё ты видишь аптекаря? не уверен, но вроде говорите вы на одном языке, хоть это радует.</h3>
         <h4 data-lang-key="r76" class="choice">про что же спросить лекаря?</h4>

         <div class="okno">
             <button data-lang-key="r77" class="knopka" onclick="nextFrame(); nextFrame()">в каком гасударстве я нахожусь?</button>
             <button data-lang-key="r78" class="knopka" onclick="increaseStat('intelligence'); nextFrame()">где здесь можно раздобить денег, и информацию?</button>
         </div>
        </div>

        <div id="frame-11-agility" class="frame agility-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r79" class="text">странно посмотрев на тебя, он головой указал на подсобную дверь</h3>
         <h4 data-lang-key="r80" class="choice">решив не задавать лишных вопросов ты заходишь туда.</h4>

         <div class="okno">
             <button data-lang-key="r44" class="knopka" onclick="nextFrame()">попробувать пойти на прямую</button>
             <button data-lang-key="r45" class="knopka" onclick="nextFrame()">найти обходной вход</button>
         </div>
        </div>

        <div id="frame-12-agility" class="frame agility-div" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r62" class="text">Дверь ловкости приняла тебя, поздравляю. Вдруг ты замечаешь, что ты не внутри замка, а на поляне, ты решаешь побродить</h3>
         <h4 data-lang-key="r62" class="choice">вдалике веднее стена, хотя нет, скорее на ворота, и там проходят люди, видимо вход в столицу</h4>

         <div class="okno">
             <button data-lang-key="r44" class="knopka" onclick="nextFrame(); nextFrame()">попробувать пойти на прямую</button>
             <button data-lang-key="r45" class="knopka" onclick="increaseStat('strength'); nextFrame()">найти обходной вход</button>
         </div>
        </div>

        <!--конец ловкости-->
        <!--начало ума\магий-->


        <!--конец ума\магий-->
        <div id="frame-win" class="frame" style="display: none;" lang="he" dir="rtl">
         <h3 data-lang-key="r36" class="text">поздровляю! ты нашёл свою дверь.</h3>
         <button class="knopka restart" data-lang-key="r40">Попробовать снова</button>
        </div>

        <div id="frame-win-2" class="frame" style="display:none;" lang="he" dir="rtl">
         <h3 data-lang-key="r62" class="text">поздровляю! это первая концовка, на этом сюжет обрывается, для продолжение заплатите 19.99$</h3>
         <div class="spacer"></div>
           <div>
             <button class="knopka restart" data-lang-key="r40">Попробовать снова</button>
             <button class="knopka" onclick="show_titri()" data-lang-key="r63">титры</button>
            </div>
        </div>

        <div id="titri" style="display: none;" lang="he" dir="rtl">
         <h3  class="titri" data-lang-key="r81">ваше путешествие подошло к концу</h3>
           <div class="titri-block">
             <p class="titri"><strong data-lang-key="r92">Имя игрока</strong> <span id="credits-name">—</span></p>
             <p class="titri"><strong data-lang-key="r82">Твои статы</strong></p>
                <p class="titri"><span data-lang-key="r83">Сила </span><span id="stat-strength">0</span></p>
                <p class="titri"><span data-lang-key="r84">Ловкость </span><span id="stat-agility">0</span></p>
                <p class="titri"><span data-lang-key="r85">Интеллект </span><span id="stat-intelligence">0</span></p>
                <p class="titri"><span data-lang-key="r86">Живучесть </span><span id="stat-vitality">0</span></p>
                <p class="titri"><strong data-lang-key="r87">Достижения</strong></p>
                <p class="titri"><span data-lang-key="r92">Был в деревне</span> <span id="plus-mark-village2"></span></p>
                <p class="titri"><span data-lang-key="r88">Найден меч</span> <span id="plus-mark-sword"></span></p>
                <p class="titri"><span data-lang-key="r89">Кулон найден</span> <span id="plus-mark-kulon"></span></p>
                <p class="titri"><span data-lang-key="r90">Встретил мудреца</span> <span id="plus-mark-mage"></span></p>
            </div>
         <button class="knopka restart" data-lang-key="r40">попробувать снова</button>
        </div>


        <div id="frame-gameover-1" class="frame" style="display:none;" lang="he" dir="rtl">
         <h3 data-lang-key="r37" class="text">Ты проиграл, ты не смог найти свою дверь.</h3> 
         <button class="knopka restart" data-lang-key="r40">Попробовать снова</button>
        </div>

        <div id="frame-gameover-2" class="frame" style="display:none;" lang="he" dir="rtl">
         <h3 data-lang-key="r39" class="text">Ты проиграл, прыгать? ты что бесмертный, или я чего то не знаю?.</h3>
         <button class="knopka restart" data-lang-key="r40">Попробовать снова</button>
        </div>

        <div id="frame-gameover-3" class="frame" style="display:none;" lang="he" dir="rtl">
         <h3 data-lang-key="r61" class="text">после пропажи мудреца, тебя ждали вечные странствие без ответов на свои вопросы.</h3> 
         <button class="knopka restart" data-lang-key="r40">Попробовать снова</button>
        </div>

        <div id="frame-gameover-4" class="frame" style="display:none;" lang="he" dir="rtl">
         <h3 data-lang-key="r74" class="text">ты попал в тюрму, ну что могу сказать... мог и лучше посторатся</h3> 
         <button class="knopka restart" data-lang-key="r40">Попробовать снова</button>
        </div>
     
     <div id="greeting" style="display: none; color: white; font-size: 2vw;"></div>
    <script>
        document.getElementById('lang').addEventListener('click', function() {
         document.getElementById('rus').style.display = 
         document.getElementById('rus').style.display === 'none' ? 'block' : 'none';
         document.getElementById('he').style.display = 
         document.getElementById('he').style.display === 'none' ? 'block' : 'none';
        });
        const translations = {
            ru: {
             r1: "Обычный день внезапно прерывается вспышкой света.",
             r2: "Что это - конец или начало? Сделай свой выбор… и узнай правду.",
             r3: "Начать",
             r4: "твой пол?",
             r5: "парень",
             r6: "девушка",
             r7: "Идя домой, вы замечаете яркую вспышку. Вдруг небо наполняется ярким, ослепительным светом. Глядя на это, вам кажется, будто небо сломалось — в нём появилась трещина. Внезапно вы чувствуете, как это нечто начинает вас затягивать.",
             r8: "Ваше действие?",
             r9: "Пытаться брыкаться и убежать.",
             r10: "Попытаться придумать план по безопасному приземлению.",
             r11: "Очнувшись, ты чувствуешь лёгкую головную боль. Вдруг замечаешь лес — но не обычный: яркий, неестественного бирюзового цвета. Неуверенно идёшь прямо и видишь развилку. Правая тропа заросла и почти пропала, а левая — будто только что сделанная, чистая и ухоженная.",
             r12: "Какой же путь ты выберешь?",
             r13: "правая тропа",
             r14: "левая тропа",
             r15: "Идя по выбранному пути, ты чувствуешь тревожность — будто кто-то наблюдает за тобой. Ты слышишь странный шум, похожий на шёпот...",
             r16: "что же вам делать?",
             r17: "попытаться прислушатся",
             r18: "закрыть уши, и ускорить щаг",
             r19: "Чуть задумавшись, ты едва не падаешь в обрыв — дальше идти некуда...",
             r20: "ваше действие?",
             r21: "прыгнуть в обрыв",
             r22: "посторатся акуратно спустится",
             r23: "После спуска ты продолжил идти и постепенно осознал, что что-то не так. Всё вокруг казалось неживым, а в голове мелькнула мысль: (Неужели я попал в иллюзию?)",
             r24: "как же тебе решить эту проблему?",
             r25: "посторатся сосредоточится и вернутся в реальность",
             r26: "доверится ощущением и пройти дальше",
             r27: "Пройдя чуть дальше вы в далике видите замок, большой, красивый, но вы замечаете стража — примерно три метра в высоту великана с мечом...",
             r28: "твои действие?",
             r29: "проскочить мимо него",
             r30: "подождать пока он не потеряет бдительность и обойти его",
             r31: "Дойдя до замка, ты замечаешь трое врат. На правых — символ кулака, на средних — кроличья лапка, на левых — символ книги...",
             r32: "куда тебе пойти?",
             r33: "в левый, веть, я сильный",
             r34: "в средний, ловкость, моё всё",
             r35: "в правый, магия мне по душе",
             r36: "поздровляю! ты нашёл свою дверь.",
             r37: "Ты проиграл, ты не смог найти свою дверь.",
             r38: "язык",
             r39: "Ты проиграл! прыгать? ты что, бесмертный? или я чего то не знаю?.",
             r40: "попробовать снова",
             r41: "продолжить",
             r42: "Дверь силы приняла тебя, поздравляю. Вдруг ты замечаешь, что ты не внутри замка, а на поляне, и вдалеке виднеется деревенька.",
             r43: "Стоит ли туда идти?",
             r44: "Пойти в сторону деревни",
             r45: "Обойти деревню",
             r46: "Пытаясь обойти деревню, ты упал в яму. Вроде бы, кроме пары царапин, ничего серьёзного. Но ты замечаешь что-то вроде сундука. Открыв его, ты видишь меч с каким-то знаком на рукояти — такой был виден на флаге в той деревне.",
             r47: "Выбравшись, ты решаешь всё-таки пойти в ту самую деревню.",
             r48: "Дойдя до деревни, ты замечаешь обычных людей. Начав расспрашивать их о мире, символе на мече и обо всём остальном, тебе удаётся узнать немного.",
             r49: "Люди сказали, что лучше обратиться к мудрецу за той частью Сумеречного леса.",
             r50: "Идя по лесу, вдалеке ты видишь дом. Через окно видно человека, сидящего за столом.",
             r51: "Как же тебе поступить?",
             r52: "Выбить дверь ногой",
             r53: "Спокойно постучать",
             r54: "Ты с разбега выбил дверь. Мудрец резко вскочил с места, его лицо исказилось от гнева. «Ты ещё не готов познать силу, если идёшь по пути разрушения», — сказал он, и дом исчез в яркой вспышке света.",
             r55: "Не думаю, что у тебя есть выбор, что делать...",
             r56: "Ты спокойно постучал в дверь. Через несколько секунд она приоткрылась, и из дома вышел седой мудрец. Он внимательно осмотрел тебя и сказал: «Ты несёшь на себе знак древней силы. Заходи, расскажу тебе больше».",
             r57: "Что же ты будешь делать?",
             r58: "Зайти внутрь.",
             r59: "Сказать, что сначала осмотришься вокруг.",
             r60: "Конец?",
             r61: "После пропажи мудреца, тебя ждали вечные странствия без ответов на свои вопросы.",
             r62: "Поздравляю! Это первая концовка - здесь сюжет обрывается. Для продолжения заплатите $19.99.",
             r63: "Титры",
             r64: "Ваши характеристики:",
             r65: "Достижения",
             r66: "Дверь ловкости приняла тебя - поздравляю! Ты оказываешься не в замке, а на поляне, и решаешь немного побродить.",
             r67: "Вдалеке виднеется стена, но точнее - ворота, и через них проходят люди: видимо, это вход в столицу.",
             r68: "Попробовать пройти прямо",
             r69: "Найти обходной вход",
             r70: "Подойдя ближе, ты видишь людей. Они не пропускают тебя дальше без документов, значит придётся вернуться обратно.",
             r71: "Вдалеке виднеется стена, но точнее - ворота, и через них проходят люди: видимо, это вход в столицу.",
             r72: "Попробовать пройти прямо",
             r73: "Найти обходной вход",
             r74: "Ты попал в тюрьму. Что ж… могло быть и лучше, попробуй снова.",
             r75: "Пройдя вдоль стены, ты видишь люк. Ты не совсем уверен, но выбора особо нет. Пройдя через люк, ты оказываешься рядом с большим зданием и табличкой в виде большого плюса — видимо, это больница. Зайдя внутрь, ты встречаешь аптекаря: кажется, вы говорите на одном языке, и это радует.",  
             r76: "О чём спросить аптекаря?",  
             r77: "В каком государстве я нахожусь?",  
             r78: "Где здесь можно раздобыть деньги и информацию?",  
             r79: "Странно посмотрев на тебя, он кивком головы указал на подсобную дверь.",  
             r80: "Решив не задавать лишних вопросов, ты заходишь туда.",
             r81: "Ваше путешествие подошло к концу.",  
             r82: "Твои характеристики:",  
             r83: "Сила:",  
             r84: "Ловкость:",  
             r85: "Интеллект:",  
             r86: "Живучесть:",  
             r87: "Достижения:",
             r88: "Найден меч",  
             r89: "Кулон найден",  
             r90: "Встретил мудреца",  
             r91: "Был в деревне",  
             r92: "имя игрока:",
             r93: "Кругом ничего примечательного, лишь кулон, брошенный под кустами.",  
             r94: "Не испытывая доверия к мудрецу, вы решаете скрыть находку.",  
             r95: "Войдя внутрь, вы понимаете, что дом гораздо просторнее, чем снаружи. Мебель — древняя, но будто только что из мастерской. Несмотря на возраст, здесь удивительно уютно.",  
             r96: "Мудрец сидит за столом и жестом приглашает вас присоединиться.",  
            },
            he: { 
             r1: "יום שגרתי נקטע באור מסמא, מסתורי — כאילו השמים נקרעו לרווחה.",
             r2: "זה הסוף... או התחלה? תבחר ותגלה את האמת.",
             r3: "התחל",
             r4: "מי אתה, נווד בעולם הזה או גיבור שנבחר?",
             r5: "בחור",
             r6: "בחורה",
             r7: "בדרך הביתה, האור מסנוור כל כך עד שאתה מרגיש כיצד החלל סביבך מתעוות. השמים נבקעים — ואתה נשאב אל תוך הלא נודע.",
             r8: "מה תעשה?",
             r9: "לנסות לברוח",
             r10: "לחשוב מה ואך 🤔",
             r11: "אתה מתעורר עם כאב ראש מצמית. היער סביבך זוהר בצבעים לא טבעיים — טורקיז, סגול, כאילו אתה בתוך חלום. לפני שתי דרכים: ימין — שביל עתיק ומכוסה בשורשים, שמאל — מסלול חלק מדי, כממתין לך.",
             r12: "לאן תלך?",
             r13: "ימינה",
             r14: "שמאלה",
             r15: "משהו זז בין העצים, עוקב אחריך. לחישות רפאים ממלאות את האוויר — מילים לא מובנות, אך מלאות איום.",
             r16: "מה תעשה?",
             r17: "להקשיב",
             r18: "לסתום את האוזניים ולהאיץ",
             r19: "כמעט נפלת לצוק... אין לאן להמשיך",
             r20: "מה עכשיו?",
             r21: "לקפוץ",
             r22: "לרדת בזהירות",
             r23: "העולם סביבך מרגיש... לא אמיתי. הצבעים זזים, הצללים מתעוותים. האם זו אשליה? או שמא אתה מאבד את שפיותך?",
             r24: "איך תצא מזה?",
             r25: "להתרכז ולחזור למציאות",
             r26: "לסמוך על התחושה ולהמשיך",
             r27: "המשך ללכת, ובמרחק אתה מבחין בטירה גדולה ויפהפייה... אבל אז אתה מבחין בשומר - ענק בגובה שלושה מטרים, אוחז בחרב עצומה.",
             r28: "איך תעבור?",
             r29: "לרוץ לידו",
             r30: "לחכות ולהתחמק",
             r31: "שלוש דלתות עומדות בפניך, כל אחת עם סמל מוזר: אגרוף (כוח), רגל ארנבת (זריזות), ספר (חוכמה). הבחירה שלך תקבע את גורלך.",
             r32: "איזו תבחר?",
             r33: "שמאלה — אני חזק",
             r34: "אמצע — זריזות בשבילי",
             r35: "ימין — קסם זה העולם שלי",
             r36: "מזל טוב, מצאת את הדלת שלך",
             r37: "נכשלת. הדלת לא נפתחה עבורך",
             r38: "שפה",
             r39: "נכשלת! לקפוץ? אתה בן-אלמוות?...",
             r40: "נסה שוב",
             r41: "המשך",
             r42: "דלת הכוח נפתחת. אתה נמצא בשדה פתוח. רחוק — כפר קטן",
             r43: "ללכת לשם?",
             r44: "לגשת לכפר",
             r45: "לעקוף",
             r46: "נפלת לבור אפל, אך בתוכו מונחת חרב עתיקה עם סמל מוכר — אותו הסמל שראית בכפר. האם זה צירוף מקרים? או גורל?",
             r47: "החלטת ללכת לשם בכל מקרה",
             r48: "הכפר מלא באנשים רגילים. הצלחת לגלות קצת מידע",
             r49: "הם הציעו לפגוש את החכם ביער הדמדומים",
             r50: "אתה רואה בית מרחוק. מבעד לחלון — איש ליד שולחן",
             r51: "מה תעשה?",
             r52: "לפרוץ את הדלת",
             r53: "לדפוק",
             r54: "החכם מסתובב לעברך, עיניו מלאות זעם. 'אתה לא ראוי לכוח,' הוא לוחש — וברגע, הבית כולו מתפוגג באוויר.",
             r55: "אין לך ברירה",
             r56: "הדלת נפתחת לאט. החכם מביט בך, ואז מבחין בסמל על החרב. 'אז זה אתה,' הוא אומר בקול רועד. 'היכנס, נווד הגורל.'",
             r57: "מה תעשה עכשיו?",
             r58: "להיכנס",
             r59: "קודם לבדוק את הסביבה",
             r60: "הסוף?",
             r61: "החכם נעלם. נותרת במסע אין-סופי בלי תשובות",
             r62: "מזל טוב! זו הסיום הראשון - הסיפור נעצר כאן. כדי להמשיך, תצטרך לשלם $19.99.",
             r63: "קרדיטים",
             r64: "הסטטיסטיקות שלך:",
             r65: "הישגים",
             r66: "דלת הזריזות נפתחת בפניך — כל הכבוד! אתה מגלה שאינך בטירה, אלא בשדה פתוח, והחלטת לטייל קצת.",
             r67: "מרחוק אתה מבחין בחומה, או בעצם בשער; אנשים חוצים דרכו - כנראה זו כניסת הבירה.",
             r68: "לנסות לעבור ישירות",
             r69: "למצוא מסלול עקיף",
             r70: "כשאתה מתקרב אתה רואה אנשים שבודקים מסמכים — בלי תעודה הם לא מתירים לך לעבור. נראה שתצטרך לחזור אחורה.",
             r71: "מרחוק אתה מבחין בחומה, או בעצם בשער; אנשים חוצים דרכו - כנראה זו כניסת הבירה.",
             r72: "לנסות לעבור ישירות",
             r73: "למצוא מסלול עקיף",
             r74: "נכנסת לכלא. טוב… יכול להיות היה יותר טוב, תנסה שוב.",
             r75: "הלכת לאורך החומה וגילית פתח ביוב. לא לגמרי ברור, אבל אין ברירה אחרת. חצת את הפתח ואתה ניצב ליד בניין גדול עם שלט בצלב אדום — כנראה בית חולים. כשנכנסת פנימה, פגשת את הרוקח; נדמה שאתם מדברים בשפה אחת, וזה משמח.",  
             r76: "על מה לשאול את הרוקח?",  
             r77: "באיזו מדינה אני נמצא?",  
             r78: "איפה אפשר להשיג כסף ומידע?",  
             r79: "הוא הביט בך במבוכה והנהן לכיוון הדלת הצדדית.",  
             r80: "החלטת שלא לשאול שאלות מיותרות ונכנסת פנימה.",  
             r81: "המסע שלך הגיע לסיומו.",  
             r82: "המאפיינים שלך:",  
             r83: "כוח:",  
             r84: "זריזות:",  
             r85: "אינטליגנציה:",  
             r86: "חוסן:",  
             r87: "הישגים:",
             r88: "החרב נמצאה",  
             r89: "הקמע נמצא",  
             r90: "פגשת את החכם",  
             r91: "ביקרת בכפר",  
             r92: "שם השחקן:",
             r93: "סביב לא היה דבר מיוחד, רק תליון מונח מתחת לשיחים.",  
             r94: "בלי לחוש אמון בחכם, החלטתם להחביא את התגלית.",  
             r95: "כשנכנסתם, גיליתם שהבית רחב יותר מבחוץ. הרהיטים עתיקים אך נראים כחדשים. למרות גילם, המקום הפיץ נוחות מפתיעה.",  
             r96: "החכם יושב ליד השולחן ומזמין אתכם להצטרף בתנועת יד.",  
            }
        }    

        let currentLang = 'ru';
        function updateTexts() {
         const elements = document.querySelectorAll('[data-lang-key]');
         elements.forEach(element => {
         if(!element) return;
            if (element.className.includes('plus-mark')) return;
            const key = element.getAttribute('data-lang-key');
            
               if (translations[currentLang]?.[key]) {
                 element.textContent = translations[currentLang][key];
                  const frame = element.closest('.frame, #tex, #gender-screen, #titri');
                    if (frame) { 
                      frame.setAttribute('dir', currentLang === 'he' ? 'rtl' : 'ltr');
                      frame.setAttribute('lang', currentLang);
                    }
                }
            });
        }

      document.getElementById('rus').addEventListener('click', () => {
          currentLang = 'ru';
          updateTexts();
          localStorage.setItem('gameLang', 'ru');
      });

      document.getElementById('he').addEventListener('click', () => {
          currentLang = 'he';
          updateTexts();
          localStorage.setItem('gameLang', 'he');
      });

        window.addEventListener('DOMContentLoaded', () => {
         const savedLang = localStorage.getItem('gameLang') || 'ru';
         currentLang = savedLang;
         updateTexts();
        });

       window.addEventListener('load', function() {
         document.getElementById('preloader').style.display = 'none';
        });

        let player = null;
        let currentFrame = 1;
        const savedPlayer = localStorage.getItem('player');
        player = savedPlayer ? JSON.parse(savedPlayer) : {};

        document.getElementById('startButton').addEventListener('click', function() {
         this.style.display = 'none';
         document.getElementById('gender-screen').style.display = 'block';
         document.getElementById('tex').style.display = 'none';
        });

        document.getElementById('boy').addEventListener('click', function() {
         askName('male');
        });

        document.getElementById('girl').addEventListener('click', function() {
         askName('female');
        });

        function askName(gender) {
         const genderText = (gender === 'male') ? 'парень' : 'девушка';
         const name = prompt(`отлично,как тебя звать?`);

           if (name) {
             alert(`отлично, приветствую тебя, ${name}!`);
      
                player = {
                 name: name,
                 gender: gender,
                 stats: {
                 strength: 0,
                 agility: 0,
                 intelligence: 0,
                 vitality: 0
                 },
                 choices: [],
                 foundSword: false,
                 metSage: false,
                 visitedVillage: false,
                 kulon: false,
                 achievements: []
                };
      
             localStorage.setItem('player', JSON.stringify(player));
             document.getElementById('gender-screen').style.display = 'none';
             document.getElementById('boy').style.display = 'none';
             document.getElementById('girl').style.display = 'none';
             document.body.style.background = 'none';
             document.getElementById('frame-1').style.display = 'block';
            } else {
             alert("???");
            }
        }

        function showSageFrame() {  
         const sageText = document.getElementById('mech');
         const player = JSON.parse(localStorage.getItem('player')) || { foundSword: false };
  
           if (player.foundSword) {
             sageText.textContent = currentLang === 'ru' 
             ? "Мудрец видит меч и улыбается: 'Этот артефакт избрал тебя... Заходи.'"
             : "החכם רואה את החרב ומחייך. 'זה לא מקרי שזה הגיע לידיך... היכנס.'";
            } else {
             sageText.textContent = currentLang === 'ru'
             ? "Мудрец осматривает тебя: 'Ты потерял что-то важное... Но всё же заходи.'"
             : "החכם בוחן אותך. 'איבדת משהו חשוב... אבל עדיין, היכנס.'";
            }

         document.getElementById('frame-13-strength').style.display = 'block';
         document.getElementById('frame-11-strength').style.display = "none";
        }

        function makeChoice(stat) {
         if (!player) return;
    
         player.stats[stat]++;
            player.choices.push(stat);
         localStorage.setItem('player', JSON.stringify(player));

         document.getElementById(`frame-${currentFrame}`).style.display = 'none';
         let nextFrame = currentFrame + 1;

         if (nextFrame <= 7) {
            document.getElementById(`frame-${nextFrame}`).style.display = 'block';
            currentFrame = nextFrame;
         }
        }
            
        let currentPath = null;

        function checkDoor(stat) {
         currentPath = stat;
         document.getElementById('frame-7').style.display = 'none';
         document.getElementById(`frame-8-${stat}`).style.display = 'block';
        }

        function nextFrame() {
         const currentFrameElement = document.querySelector(`.${currentPath}-div[style*="block"]`);
         if (!currentFrameElement) return;

         const currentFrameNumber = parseInt(currentFrameElement.id.split('-')[1]);
    
         currentFrameElement.style.display = 'none';

         const nextFrameNumber = currentFrameNumber + 1;
         const nextFrameElement = document.getElementById(`frame-${nextFrameNumber}-${currentPath}`);
    
            if (nextFrameElement) {
             nextFrameElement.style.display = 'block';
            } else {
                document.getElementById('frame-win').style.display = 'block';
            }
        }

        document.addEventListener('click', function(e) {
            if (e.target && e.target.classList.contains('restart')) {
                currentFrame = 1;

                if (player) {
                    player = {
                        name: player.name,
                        gender: player.gender,
                        stats: { strength: 0, agility: 0, intelligence: 0, vitality: 0 },
                        choices: [],
                        foundSword: false,
                        metSage: false,
                        kulon: false,
                        visitedVillage2: false,
                        achievements: [],
                    };
                    localStorage.setItem('player', JSON.stringify(player));
                }

                document.querySelectorAll('.frame').forEach(frame => {
                  frame.style.display = 'none';
                  document.getElementById('titri').style.display = 'none';
                })

             document.getElementById('frame-1').style.display = 'block';
            }
        });

        function increaseStat(stat) {
            if (player && player.stats[stat] !== undefined) {
             player.stats[stat]++;
             localStorage.setItem('player', JSON.stringify(player));
            } else {
             console.warn("Игрок не найден или неправильный параметр: " + stat);
            }
        }
        function show_titri() {
         const titriElement = document.getElementById("titri");
            if(!titriElement) {
             console.error("Элемент #titri не найден");
             return;
            }
         const raw = localStorage.getItem('player');
         const saved = raw ? JSON.parse(raw) : {};

         const playerData = {
             name: saved.name || (currentLang === 'ru' ? "Безымянный герой" : "גיבור אלמוני"),
             stats: {
                 strength: saved.stats?.strength || 0,
                 agility: saved.stats?.agility || 0,
                 intelligence: saved.stats?.intelligence || 0,
                 vitality: saved.stats?.vitality || 0,
                },
             choices: saved.choices || [],
             foundSword: Boolean(saved.foundSword),
             kulon: Boolean(saved.kulon),
             metSage: Boolean(saved.metSage),
             visitedVillage2: Boolean(saved.visitedVillage2),
            };

         document.getElementById("credits-name").textContent = playerData.name;
      
         document.querySelector('.frame[style*="block"]').style.display = 'none';
         document.getElementById("titri").style.display = 'block';
      
         document.getElementById("credits-name").textContent = playerData.name;
         document.getElementById("stat-strength").textContent     = playerData.stats.strength;
         document.getElementById("stat-agility").textContent      = playerData.stats.agility;
         document.getElementById("stat-intelligence").textContent = playerData.stats.intelligence;
         document.getElementById("stat-vitality").textContent     = playerData.stats.vitality;
      
         document.querySelectorAll(".plus-mark").forEach(el => el.textContent = "");

         document.querySelector("#plus-mark-sword").textContent   = playerData.foundSword     ? "➕" : "❌";
         document.querySelector("#plus-mark-kulon").textContent   = playerData.kulon           ? "➕" : "❌";
         document.querySelector("#plus-mark-mage").textContent    = playerData.metSage         ? "➕" : "❌";
         document.querySelector("#plus-mark-village2").textContent = playerData.visitedVillage2  ? "➕" : "❌";
         

        }
    </script>
    </body>
</html>
<!-- 1.5 -->
<!-- ужас, 1200 строк, думаю пора разбивать на куски и в разные файлы запихивать код. -->
